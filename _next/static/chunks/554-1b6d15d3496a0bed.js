"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{22554:(e,t,a)=>{a.d(t,{A:()=>e$});var s=a(95155),r=a(12115),n=a(74211),i=a(93306),l=a(57916);a(11687);var o=a(38543),d=a(85690);let c=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 text-blue-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:t.url?t.url:"Start workflow..."}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,isConnectable:a,className:"!bg-blue-500"})]})});c.displayName="StartNode";var h=a(24357),m=a(62525),u=a(34869);let p=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return t.name,(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:t.endpoint?"".concat(t.method,": ").concat(t.endpoint):"Configure API..."}),(0,s.jsx)(n.h7,{type:"target",position:n.yX.Top,isConnectable:a,className:"!bg-green-500"}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,isConnectable:a,className:"!bg-green-500"})]})});p.displayName="ApiNode";var f=a(2775);let x=e=>"=="==e?"Igual":">"==e?"Maior que":"<"==e?"Menor que":"!="==e?"Diferente":">="==e?"Maior que ou igual":"<="==e?"Menor que ou igual":e,g=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"h-5 w-5 text-amber-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-center text-muted-foreground",children:t.condition?(0,s.jsxs)("p",{children:[t.condition.left," ",x(t.condition.operator).toLowerCase()," ",t.condition.right]}):"Configure condition..."}),(0,s.jsxs)("div",{className:"mt-2 flex justify-between text-xs",children:[(0,s.jsx)("div",{className:"text-green-600",children:t.trueLabel}),(0,s.jsx)("div",{className:"text-red-600",children:t.falseLabel})]}),(0,s.jsx)(n.h7,{type:"target",position:n.yX.Top,isConnectable:a,className:"!bg-amber-500"}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,id:"true",style:{left:"25%"},isConnectable:a,className:"!bg-green-600"}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,id:"false",style:{left:"75%"},isConnectable:a,className:"!bg-red-600"})]})});g.displayName="ConditionNode";var v=a(41335);let j=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm relative",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.A,{className:"h-5 w-5 text-blue-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-center text-muted-foreground",children:t.source?"Loop over: ".concat(t.source):"Configure loop source..."}),(0,s.jsxs)("div",{className:"mt-2 flex justify-between text-xs",children:[(0,s.jsx)("div",{className:"text-blue-600",children:"Loop"}),(0,s.jsx)("div",{className:"text-gray-600",children:"Done"})]}),(0,s.jsx)(n.h7,{type:"target",position:n.yX.Top,isConnectable:a,className:"!bg-blue-500"}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,id:"loop",style:{left:"25%"},isConnectable:a,className:"!bg-blue-600"}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,id:"done",style:{left:"75%"},isConnectable:a,className:"!bg-gray-600"})]})});j.displayName="LoopNode";var y=a(1243),b=a(74126),k=a(49103),N=a(97168),w=a(89852),C=a(82714),S=a(99474),A=a(80830),E=a(66474),D=a(5196),T=a(47863),L=a(53999);function _(e){let{...t}=e;return(0,s.jsx)(A.bL,{"data-slot":"select",...t})}function R(e){let{...t}=e;return(0,s.jsx)(A.WT,{"data-slot":"select-value",...t})}function P(e){let{className:t,size:a="default",children:r,...n}=e;return(0,s.jsxs)(A.l9,{"data-slot":"select-trigger","data-size":a,className:(0,L.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,(0,s.jsx)(A.In,{asChild:!0,children:(0,s.jsx)(E.A,{className:"size-4 opacity-50"})})]})}function F(e){let{className:t,children:a,position:r="popper",...n}=e;return(0,s.jsx)(A.ZL,{children:(0,s.jsxs)(A.UC,{"data-slot":"select-content",className:(0,L.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,s.jsx)(O,{}),(0,s.jsx)(A.LM,{className:(0,L.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(I,{})]})})}function z(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(A.q7,{"data-slot":"select-item",className:(0,L.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(A.VF,{children:(0,s.jsx)(D.A,{className:"size-4"})})}),(0,s.jsx)(A.p4,{children:a})]})}function O(e){let{className:t,...a}=e;return(0,s.jsx)(A.PP,{"data-slot":"select-scroll-up-button",className:(0,L.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(T.A,{className:"size-4"})})}function I(e){let{className:t,...a}=e;return(0,s.jsx)(A.wn,{"data-slot":"select-scroll-down-button",className:(0,L.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(E.A,{className:"size-4"})})}var J=a(99840);let $={start:"start",api:"api",condition:"condition",code:"code",loop:"loop"};function M(e){let{type:t="text",options:a=[],value:n="",onChange:i,placeholder:l,className:o}=e,[d,c]=(0,r.useState)(n),[h,m]=(0,r.useState)(!1),u=(0,r.useRef)(null),p=(0,r.useRef)(null),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{c(n)},[n]),(0,r.useEffect)(()=>{let e=e=>{(u.current&&!u.current.contains(e.target)&&f.current&&!f.current.contains(e.target)||p.current&&!p.current.contains(e.target)&&p.current&&!p.current.contains(e.target))&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let x=e=>{let t=null==e?void 0:e.lastIndexOf("{{");return t>=0?e.substring(t+2):""},g=a.filter(e=>e.toLowerCase().includes(x(d).toLowerCase())),v=e=>{c(e),null==i||i(e),m(!1)};return(0,s.jsxs)("div",{className:"relative",children:[h&&g.length>0&&(0,s.jsx)("div",{ref:f,className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-40 overflow-y-auto",children:g.map((e,t)=>(0,s.jsx)(N.$,{variant:"ghost",className:"w-full justify-start text-left",onSelect:()=>{console.log("passed on here select event")},onClick:()=>{console.log("passed on here"),v(e)},children:e},t))}),"text"==t&&(0,s.jsx)(w.p,{type:t,ref:u,value:d,onChange:e=>{let t=e.target.value;c(t),null==i||i(t),t.startsWith("{{")||t.indexOf("{{")>=0||!u.current&&t.indexOf("{{")>=0?m(!0):m(!1)},placeholder:l,className:o})]})}let V=(0,a(74466).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),W=r.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,L.cn)(V({variant:r}),a),...n})});W.displayName="Alert";let U=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,L.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});U.displayName="AlertTitle";let q=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,L.cn)("text-sm [&_p]:leading-relaxed",a),...r})});function B(e){let{node:t,onChange:a,onClose:n,isOpen:i=!0,optionsMenu:l=[]}=e,[o,d]=(0,r.useState)({...t.data}),[c,h]=(0,r.useState)([{}]),[m,u]=(0,r.useState)([{}]),[p,f]=(0,r.useState)(t.data.condition||{left:"",operator:"",right:""}),x={[$.start]:!0,[$.api]:!0,[$.condition]:!0,[$.code]:!0,[$.loop]:!0},g=()=>{let e=[...m];e.push({key:"",type:"",value:""}),u([...e])},v=e=>{if(1==m.length)return;let t=[...m];t.splice(e,1),u([...t])},j=()=>{let e=[...c];e.push({key:"",type:"",value:""}),h([...e])},S=e=>{if(1==c.length)return;let t=[...c];t.splice(e,1),h([...t])},A=(e,t,a)=>{m[e][t]=a,u([...m])},E=(e,t,a)=>{c[e][t]=a,h([...c])};(0,r.useEffect)(()=>{d(t.data),t.data&&t.data.headers&&t.data.headers.length>0&&h(t.data.headers),t.data&&t.data.body&&t.data.body.length>0&&u(t.data.body)},[t]);let D=(e,s)=>{let r={...o,headers:[...c],body:[...m],[e]:s};d(r),a(t.id,r)};return(0,s.jsx)(J.lG,{open:i,onOpenChange:e=>!e&&n(),children:(0,s.jsxs)(J.Cf,{className:"min-w-4xl max-h-[80vh] overflow-y-scroll ",children:[(0,s.jsx)(J.c7,{children:(0,s.jsxs)(J.L3,{children:["Configure ",t.type.charAt(0).toUpperCase()+t.type.slice(1)]})}),(0,s.jsxs)("div",{className:"w-full mt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"label",children:"Node Type"}),(0,s.jsx)(w.p,{id:"label",value:o.label||"",disabled:!0,onChange:e=>D("label",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"name",children:"Step Name"}),(0,s.jsx)(w.p,{id:"name",value:o.name||"",onChange:e=>D("name",e.target.value.replace(/ /g,"_").toLowerCase()),placeholder:"Enter a descriptive name for this step"})]}),t.type===$.start&&(0,s.jsx)(s.Fragment,{}),t.type===$.api&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(W,{variant:"destructive",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),(0,s.jsx)(U,{children:"CORS Bypass"}),(0,s.jsxs)(q,{children:["To bypass the CORS problem, use the script from"," ",(0,s.jsx)("a",{href:"https://gist.github.com/tiago123456789/1818973dd1fa794206d5ba0a835fa5c0",target:"_blank",rel:"noopener noreferrer",children:"https://gist.github.com/tiago123456789/1818973dd1fa794206d5ba0a835fa5c0"}),", create an account on"," ",(0,s.jsx)("a",{href:"https://www.val.town/",target:"_blank",rel:"noopener noreferrer",children:"https://www.val.town/"}),", create a Val, select HTTP and copy the script from the Gist link."]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"endpoint",children:"API Endpoint"}),(0,s.jsx)(M,{options:l,value:o.endpoint||"",placeholder:"https://api.example.com/data",onChange:e=>D("endpoint",e)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"method",children:"HTTP Method"}),(0,s.jsxs)(_,{value:o.method||"GET",onValueChange:e=>D("method",e),children:[(0,s.jsx)(P,{children:(0,s.jsx)(R,{placeholder:"Select method"})}),(0,s.jsxs)(F,{children:[(0,s.jsx)(z,{value:"GET",children:"GET"}),(0,s.jsx)(z,{value:"POST",children:"POST"}),(0,s.jsx)(z,{value:"PUT",children:"PUT"}),(0,s.jsx)(z,{value:"DELETE",children:"DELETE"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"headers",children:"Headers (JSON)"}),c.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C.J,{children:"Key"}),(0,s.jsx)(M,{options:l,value:e.key||"",placeholder:"api-key",onChange:e=>E(t,"key",e)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C.J,{children:"Value"}),(0,s.jsx)(M,{options:l,value:e.value,placeholder:"value here",onChange:e=>E(t,"value",e)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2",children:[(0,s.jsx)("div",{className:"py-3",children:(0,s.jsx)(N.$,{onClick:()=>S(t),children:(0,s.jsx)(b.A,{})})}),(0,s.jsx)("div",{className:"py-3",style:{marginLeft:"-50px"},children:(0,s.jsx)(N.$,{onClick:()=>j(),children:(0,s.jsx)(k.A,{})})})]})]},t))]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"body",children:"Request Body (JSON)"}),m.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C.J,{children:"Key"}),(0,s.jsx)(M,{options:l,value:e.key,placeholder:"key here",onChange:e=>A(t,"key",e)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C.J,{children:"Value"}),(0,s.jsx)(M,{options:l,value:e.value,placeholder:"value here",onChange:e=>A(t,"value",e)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2",children:[(0,s.jsx)("div",{className:"py-3",children:(0,s.jsx)(N.$,{onClick:()=>v(t),children:(0,s.jsx)(b.A,{})})}),(0,s.jsx)("div",{className:"py-3",style:{marginLeft:"-50px"},children:(0,s.jsx)(N.$,{onClick:()=>{g()},children:(0,s.jsx)(k.A,{})})})]})]},t))]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(N.$,{onClick:()=>{D("headers",c),D("body",m),u([{}]),h([{}]),n()},children:"Save"})})]}),t.type===$.condition&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"condition",children:"Condition Expression"}),(0,s.jsxs)("div",{className:"grid grid-cols-3",children:[(0,s.jsxs)("div",{className:"py-6",children:[(0,s.jsx)(C.J,{}),(0,s.jsx)(M,{options:l,value:p.left,placeholder:"value here",onChange:e=>f({...p,left:e})})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"px-2 space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"method",children:"Condi\xe7\xe3o"}),(0,s.jsxs)(_,{value:p.operator,onValueChange:e=>f({...p,operator:e}),children:[(0,s.jsx)(P,{children:(0,s.jsx)(R,{placeholder:"Selecionar condi\xe7\xe3o"})}),(0,s.jsxs)(F,{children:[(0,s.jsx)(z,{value:"==",children:"Igual"}),(0,s.jsx)(z,{value:">",children:"Maior que"}),(0,s.jsx)(z,{value:"<",children:"Menor que"}),(0,s.jsx)(z,{value:"!=",children:"Diferente"}),(0,s.jsx)(z,{value:">=",children:"Maior que ou igual"}),(0,s.jsx)(z,{value:"<=",children:"Menor que ou igual"})]})]})]})}),(0,s.jsxs)("div",{className:"px-1 py-6",children:[(0,s.jsx)(C.J,{}),(0,s.jsx)(M,{options:l,value:p.right,placeholder:"value here",onChange:e=>f({...p,right:e})})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(N.$,{onClick:()=>{D("condition",p),f({}),d(null),n()},children:"Save"})})]},1)]})}),t.type===$.loop&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:o.name,children:"Source of data"}),(0,s.jsx)(M,{options:l,value:o.source,placeholder:"value here",onChange:e=>D("source",e)})]},o.name),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(N.$,{onClick:()=>{d(null),n()},children:"Save"})})]}),!x[t.type]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full space-y-2",children:t.data.properties.map(e=>{var a;let r=e.required?"(Required)":"(Optional)";return(null==e||null==(a=e.conditionShow)?void 0:a.length)>0&&e.conditionShow.filter(e=>o[e.keyCheck]==e.valueExpected).length!=e.conditionShow.length?null:"select"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(C.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsxs)(_,{value:o[e.name]||t.data[e.name]||"",onValueChange:t=>D(e.name,t),children:[(0,s.jsx)(P,{children:(0,s.jsx)(R,{placeholder:"Select an option"})}),(0,s.jsx)(F,{children:e.options.map(e=>(0,s.jsx)(z,{value:e.value,children:e.label},e.value))})]})]},e.name):"textarea"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(C.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsx)("textarea",{rows:5,cols:55,value:o[e.name]||t.data[e.name]||"",onChange:t=>D(e.name,t.target.value),children:o[e.name]})]},e.name):"text"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(C.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsx)(M,{placeholder:"Type value here",options:l,value:o[e.name]||t.data[e.name],onChange:t=>D(e.name,t)})]},e.name):"number"==e.type?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(C.J,{htmlFor:e.name,children:[e.label," ",r]}),(0,s.jsx)(w.p,{type:"number",id:e.name,value:o[e.name]||t.data[e.name]||"",onChange:t=>D(e.name,t.target.value)})]},e.name):void 0})}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(N.$,{onClick:()=>{d(null),n()},children:"Save"})})]})]})]})})}q.displayName="AlertDescription";var G=a(381),X=a(29869),H=a(15968),Y=a(4229),K=a(74556),Z=a(3417);let Q=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return t.code&&(t.code.split("\n").slice(0,3).join("\n"),t.code.split("\n").length),(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm relative",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"h-5 w-5 text-purple-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)(n.h7,{type:"target",position:n.yX.Top,isConnectable:a,className:"!bg-purple-500"}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,isConnectable:a,className:"!bg-purple-500"})]})});Q.displayName="CodeNode";var ee=a(84616),et=a(44570);function ea(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(et.bL,{"data-slot":"scroll-area",className:(0,L.cn)("relative",t),...r,children:[(0,s.jsx)(et.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,s.jsx)(es,{}),(0,s.jsx)(et.OK,{})]})}function es(e){let{className:t,orientation:a="vertical",...r}=e;return(0,s.jsx)(et.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,L.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...r,children:(0,s.jsx)(et.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function er(e){let{isOpen:t,onClose:a,envData:n,onSave:i}=e,[l,o]=(0,r.useState)([]),d=e=>{o(l.filter(t=>t.id!==e))},c=(e,t,a)=>{o(l.map(s=>s.id===e?{...s,[t]:a}:s))};return(0,r.useEffect)(()=>{o([...n])},[n]),(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[600px] flex flex-col",children:[(0,s.jsx)(J.c7,{children:(0,s.jsx)(J.L3,{children:"Env Data"})}),(0,s.jsx)(ea,{className:"flex-1 overflow-auto pr-4 -mr-4 max-h-[50vh]",children:(0,s.jsx)("div",{className:"space-y-6 py-2",children:0===l.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Env data stored here can be referenced on Flow."}):l.map(e=>(0,s.jsxs)("div",{className:"grid gap-3 border-b pb-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Env Data"}),(0,s.jsx)(N.$,{variant:"ghost",size:"icon",onClick:()=>d(e.id),className:"h-7 w-7 text-muted-foreground hover:text-red-500",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"key-".concat(e.id),children:"Key"}),(0,s.jsx)(w.p,{id:"key-".concat(e.id),value:e.key,onChange:t=>c(e.id,"key",t.target.value),placeholder:"api_key"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"value-".concat(e.id),children:"Value"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(w.p,{id:"value-".concat(e.id),type:"text",value:e.value,onChange:t=>c(e.id,"value",t.target.value),placeholder:"••••••••"})})]})]})]},e.id))})}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsxs)(N.$,{variant:"outline",size:"sm",onClick:()=>{o([...l,{id:"data-".concat(Date.now()),key:"",value:""}])},className:"w-full",children:[(0,s.jsx)(ee.A,{className:"mr-2 h-4 w-4"}),"Add Sensitive Data"]})}),(0,s.jsxs)(J.Es,{children:[(0,s.jsx)(N.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,s.jsx)(N.$,{onClick:()=>{i(l.filter(e=>""!==e.key.trim())),a()},children:"Save Changes"})]})]})})}function en(e){let{isOpen:t,onClose:a,logs:r,isLoading:n}=e,i=e=>"object"==typeof e&&null!==e?JSON.stringify(e,null,2):String(e);return(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[800px] flex flex-col max-h-[80vh]",children:[(0,s.jsxs)(J.c7,{children:[(0,s.jsxs)(J.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 text-green-500"}),"Flow Execution Logs"]}),(0,s.jsx)(J.rr,{children:"View the output from each step in your Flow execution."})]}),(0,s.jsx)(ea,{className:"flex-1 overflow-auto pr-4 -mr-4",children:(0,s.jsx)("div",{className:"space-y-4 py-2",children:n?(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(d.A,{className:"h-8 w-8 animate-pulse mx-auto mb-2"}),"Running Flow..."]}):0===r.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No logs available. Run the Flow to see execution results."}):r.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md border text-xs font-mono bg-muted",children:["Step ",t+1]}),(0,s.jsx)("span",{className:"font-medium text-sm",children:e.step})]}),(0,s.jsx)("div",{className:"bg-muted p-3 rounded-md",children:(0,s.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap overflow-x-auto",children:i(e.output)})})]},t))})}),(0,s.jsx)(J.Es,{children:(0,s.jsx)(N.$,{variant:"outline",onClick:a,children:"Close"})})]})})}var ei=a(81284);function el(e){let{isOpen:t,onClose:a,settings:n}=e,[i,l]=(0,r.useState)([...n]),o=e=>{l(i.filter(t=>t.id!==e))},d=(e,t,a)=>{l(i.map(s=>s.id===e?{...s,[t]:a}:s))};return(0,r.useEffect)(()=>{l([...n])},[n]),(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[600px] flex flex-col",children:[(0,s.jsxs)(J.c7,{children:[(0,s.jsx)(J.L3,{children:"Settings"}),(0,s.jsx)(J.rr,{children:"Configure application settings here."})]}),(0,s.jsxs)(W,{children:[(0,s.jsx)(ei.A,{className:"h-4 w-4"}),(0,s.jsx)(U,{children:"How to Generate OpenRouter Token"}),(0,s.jsxs)(q,{children:["You can generate the 'openRouterToken' key by creating an account on"," ",(0,s.jsx)("a",{href:"https://openrouter.ai/",target:"_blank",rel:"noopener noreferrer",children:"https://openrouter.ai/"}),", accessing the API keys option, and clicking 'Create api key'."]})]}),(0,s.jsx)(ea,{className:"flex-1 overflow-auto pr-4 -mr-4 max-h-[50vh]",children:(0,s.jsx)("div",{className:"space-y-6 py-2",children:0===i.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No settings configured yet."}):i.map(e=>(0,s.jsxs)("div",{className:"grid gap-3 border-b pb-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Setting"}),(0,s.jsx)(N.$,{variant:"ghost",size:"icon",onClick:()=>o(e.id),className:"h-7 w-7 text-muted-foreground hover:text-red-500",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"key-".concat(e.id),children:"Key"}),(0,s.jsx)(w.p,{id:"key-".concat(e.id),value:e.key,onChange:t=>d(e.id,"key",t.target.value),disabled:!0,placeholder:"openRouterToken"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"value-".concat(e.id),children:"Value"}),(0,s.jsx)(w.p,{id:"value-".concat(e.id),value:e.value,onChange:t=>d(e.id,"value",t.target.value),placeholder:"Enter value"})]})]})]},e.id))})}),(0,s.jsxs)(J.Es,{children:[(0,s.jsx)(N.$,{variant:"outline",onClick:a,children:"Cancel"}),(0,s.jsx)(N.$,{onClick:()=>{i.filter(e=>""!==e.key.trim()).forEach(e=>{localStorage.setItem(e.key,e.value)}),a()},children:"Save Changes"})]})]})})}var eo=a(71126),ed=a.n(eo);function ec(e){let{isOpen:t,onClose:a,onSave:n}=e,[i,l]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),u=()=>{a(),l(""),c(""),m("")};return(0,s.jsx)(J.lG,{open:t,onOpenChange:e=>!e&&u(),children:(0,s.jsxs)(J.Cf,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(J.c7,{children:[(0,s.jsx)(J.L3,{children:"Add Curl"}),(0,s.jsx)(J.rr,{children:"Paste your curl command to create an API node."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"name",children:"Name"}),(0,s.jsx)(w.p,{id:"name",value:d,onChange:e=>c(e.target.value),placeholder:"Enter node name"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(w.p,{id:"description",value:h,onChange:e=>m(e.target.value),placeholder:"Enter description (optional)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C.J,{htmlFor:"curl",children:"Curl Command"}),(0,s.jsx)(S.T,{id:"curl",value:i,onChange:e=>l(e.target.value),placeholder:"Paste your curl command here",rows:6})]})]}),(0,s.jsxs)(J.Es,{children:[(0,s.jsx)(N.$,{variant:"outline",onClick:u,children:"Cancel"}),(0,s.jsx)(N.$,{onClick:()=>{if(!i.trim())return void o.oR.error("Please enter a curl command");if(!d.trim())return void o.oR.error("Please enter a name");try{let e=ed()(i),t={type:"api",label:d,name:d.toLowerCase().replace(/\s+/g,"_"),endpoint:e.url,method:e.method||"GET",headers:e.headers?Object.entries(e.headers).map(e=>{let[t,a]=e;return{key:t,value:String(a),expression:"raw"}}):[]},s=[];e.data&&(s="object"==typeof e.data&&null!==e.data?Object.entries(e.data).map(e=>{let[t,a]=e;return{key:t,value:"string"==typeof a?a:JSON.stringify(a),expression:"raw"}}):[{key:"body",value:String(e.data),expression:"raw"}]),t.body=s,t.description=h,n(t),a(),l(""),c(""),m("")}catch(e){console.error("Error parsing curl:",e),o.oR.error("Invalid curl command")}},children:"Save"})]})]})})}var eh=a(13052),em=a(42355),eu=a(54416),ep=a(77482);function ef(e){let{delayDuration:t=0,...a}=e;return(0,s.jsx)(ep.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function ex(e){let{...t}=e;return(0,s.jsx)(ef,{children:(0,s.jsx)(ep.bL,{"data-slot":"tooltip",...t})})}function eg(e){let{...t}=e;return(0,s.jsx)(ep.l9,{"data-slot":"tooltip-trigger",...t})}function ev(e){let{className:t,sideOffset:a=0,children:r,...n}=e;return(0,s.jsx)(ep.ZL,{children:(0,s.jsxs)(ep.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,L.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,(0,s.jsx)(ep.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}let ej=(0,r.memo)(e=>{let{onAddNode:t,httpRequestNodes:a,customNodes:n,onAddCurl:i}=e,[l,o]=(0,r.useState)(!1),[c,h]=(0,r.useState)(""),[m,p]=(0,r.useState)([{type:"start",label:"Start",icon:d.A,description:"Start point",color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{type:"api",label:"API",icon:u.A,description:"Make HTTP requests to external APIs",color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200"},{type:"condition",label:"Condition",icon:f.A,description:"Add conditional logic to your flow",color:"text-amber-500",bgColor:"bg-amber-50",borderColor:"border-amber-200"},{type:"loop",label:"Loop",icon:v.A,description:"Execute actions multiple times over a list",color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"}]),x={},g=e=>!x[e.label]&&(x[e.label]=!0,e.label.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase()));return(0,r.useEffect)(()=>{p([...m,...a,...n])},[n,a]),(0,s.jsxs)("div",{className:(0,L.cn)("h-full border-r bg-background transition-all duration-300 flex flex-col",l?"w-14":"w-64"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)("h2",{className:(0,L.cn)("font-semibold",l&&"sr-only"),children:"Components"}),(0,s.jsx)(N.$,{variant:"ghost",size:"icon",onClick:()=>o(!l),className:"h-7 w-7","aria-label":l?"Expand sidebar":"Collapse sidebar",children:l?(0,s.jsx)(eh.A,{className:"h-4 w-4"}):(0,s.jsx)(em.A,{className:"h-4 w-4"})})]}),!l&&(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(w.p,{type:"text",placeholder:"Search nodes...",value:c,onChange:e=>h(e.target.value),className:"pr-8"}),c&&(0,s.jsx)(N.$,{variant:"ghost",size:"icon",onClick:()=>h(""),className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6",children:(0,s.jsx)(eu.A,{className:"h-4 w-4"})})]})}),!l&&(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)(N.$,{onClick:i,variant:"outline",className:"w-full",children:"Convert curl"})}),(0,s.jsx)("div",{className:"w-4/4 h-full max-h-screen overflow-y-auto flex flex-col flex-grow",children:(0,s.jsx)("div",{className:(0,L.cn)("space-y-2",l&&"space-y-3"),style:{marginBottom:"250px"},children:m.filter(e=>g(e)).map((e,a)=>(0,s.jsx)(ef,{delayDuration:0,children:(0,s.jsxs)(ex,{children:[(0,s.jsx)(eg,{asChild:!0,children:(0,s.jsxs)("button",{onClick:()=>t(e.type,{...e}),className:(0,L.cn)("w-full flex items-center gap-3 p-2 rounded-md transition-colors",e.bgColor,e.borderColor,"border hover:bg-muted",l?"justify-center":"justify-start"),children:[null!=e.icon&&(0,s.jsx)(e.icon,{className:(0,L.cn)("h-5 w-5",e.color)}),null==e.icon&&(0,s.jsx)(u.A,{className:(0,L.cn)("h-5 w-5",e.color)}),!l&&(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-medium",children:e.label}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})}),l&&(0,s.jsxs)(ev,{side:"right",className:"flex flex-col gap-1",children:[(0,s.jsx)("div",{className:"font-medium",children:e.label}),(0,s.jsx)("div",{className:"text-xs",children:e.description})]})]})},"".concat(e.type,"_").concat(Date.now(),"_").concat(a)))})})]})}),ey="CustomNode",eb=(0,r.memo)(e=>{let{data:t,isConnectable:a}=e;return ey=t.name,(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3 shadow-sm",children:[(0,s.jsx)("button",{className:"absolute top-2 left-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.duplicateNode()},"aria-label":"Delete node",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",onClick:e=>{e.stopPropagation(),t.deleteNode()},"aria-label":"Delete node",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-blue-500"}),(0,s.jsx)("div",{className:"font-medium",children:t.label})]}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:t.name||"Unnamed Step"}),(0,s.jsx)(n.h7,{type:"target",position:n.yX.Top,isConnectable:a,className:"!bg-blue-500"}),(0,s.jsx)(n.h7,{type:"source",position:n.yX.Bottom,isConnectable:a,className:"!bg-blue-500"})]})});eb.displayName=ey;var ek=a(35695),eN=a(80203);let ew={ENV_DATA:"envData",NEW_NODE:"newNode",NEW_MANY_NODES:"newManyNodes"};var eC=a(88482),eS=a(71366),eA=a(87712);let eE=function(e){let{messages:t=[],onSendMessage:a,placeholder:n="Type your message here...",className:i,maxHeight:l="800px",defaultMinimized:o=!1,title:d="Chat",isFloating:c=!1,defaultPosition:h={x:20,y:20}}=e,[m,u]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),[x,g]=(0,r.useState)(o),[v,j]=(0,r.useState)(h),[y,b]=(0,r.useState)(!1),[k,w]=(0,r.useState)({x:0,y:0}),C=(0,r.useRef)(null),A=(0,r.useRef)(null),E=(0,r.useRef)(null),D=()=>{var e;null==(e=C.current)||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{D()},[t]);let T=async e=>{if(e.preventDefault(),!m.trim()||p)return;let t=m.trim();u(""),f(!0);try{await (null==a?void 0:a(t))}catch(e){console.error(e)}finally{f(!1)}},_=()=>{let e=A.current;e&&(e.style.height="auto",e.style.height="".concat(Math.min(e.scrollHeight,120),"px"))},R=e=>{y&&c&&j({x:e.clientX-k.x,y:e.clientY-k.y})},P=()=>{b(!1)};(0,r.useEffect)(()=>{if(y&&c)return document.addEventListener("mousemove",R),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",P)}},[y,k,c]),(0,r.useEffect)(()=>{_()},[m]);let F=(0,L.cn)("flex flex-col",i,c&&"fixed z-50 shadow-lg border-2");return(0,s.jsx)("div",{ref:E,style:c?{left:"".concat(v.x,"px"),top:"".concat(v.y,"px"),cursor:y?"grabbing":"grab"}:{},className:F,children:(0,s.jsxs)(eC.Zp,{className:"w-full h-full",children:[(0,s.jsxs)(eC.aR,{className:(0,L.cn)("flex flex-row items-center justify-between space-y-0 pb-2",c&&"cursor-grab active:cursor-grabbing select-none"),onMouseDown:e=>{if(c){var t;b(!0);let a=null==(t=E.current)?void 0:t.getBoundingClientRect();a&&w({x:e.clientX-a.left,y:e.clientY-a.top})}},children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eS.A,{className:"h-5 w-5"}),(0,s.jsx)("h2",{className:"text-sm font-semibold",children:d}),!x&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",t.length," messages)"]})]}),(0,s.jsx)(N.$,{variant:"ghost",size:"sm",onClick:()=>{g(!x)},className:"h-8 w-8 p-0",children:x?(0,s.jsx)(ee.A,{className:"h-4 w-4"}):(0,s.jsx)(eA.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(eC.Wu,{className:"flex flex-col h-full p-4 pt-0",children:(0,s.jsxs)(ea,{className:"flex-1 mb-4 pr-4",style:{maxHeight:l},children:[(0,s.jsxs)("div",{className:"space-y-4",children:[0===t.length?(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:(0,s.jsx)("p",{children:"No messages yet. Start a conversation!"})}):t.map(e=>(0,s.jsx)("div",{className:(0,L.cn)("flex","user"===e.sender?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:(0,L.cn)("max-w-[80%] rounded-lg px-3 py-2 text-sm","user"===e.sender?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),(0,s.jsx)("p",{className:(0,L.cn)("text-xs mt-1 opacity-70","user"===e.sender?"text-primary-foreground":"text-muted-foreground"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),p&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-muted rounded-lg px-3 py-2 text-sm",children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,s.jsx)("div",{ref:C})]}),(0,s.jsxs)("form",{onSubmit:T,className:"flex gap-2",children:[(0,s.jsx)("div",{className:"flex-1 relative",children:(0,s.jsx)(S.T,{ref:A,value:m,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T(e))},placeholder:n,className:"resize-none pr-12 min-h-[40px] max-h-[120px]",disabled:p})}),(0,s.jsx)(N.$,{type:"submit",disabled:!m.trim()||p,className:"self-end",size:"sm",children:p?"Sending...":"Send"})]})]})})]})})},eD=["{{this.state.faker.person.firstName()}}","{{this.state.faker.person.lastName()}}","{{this.state.faker.person.fullName()}}","{{this.state.faker.person.gender()}}","{{this.state.faker.person.sex()}}","{{this.state.faker.person.jobTitle()}}","{{this.state.faker.person.jobArea()}}","{{this.state.faker.person.jobDescriptor()}}","{{this.state.faker.person.jobType()}}","{{this.state.faker.person.prefix()}}","{{this.state.faker.person.suffix()}}","{{this.state.faker.person.middleName()}}","{{this.state.faker.person.bio()}}","{{this.state.faker.location.streetAddress()}}","{{this.state.faker.location.city()}}","{{this.state.faker.location.state()}}","{{this.state.faker.location.zipCode()}}","{{this.state.faker.location.country()}}","{{this.state.faker.location.countryCode()}}","{{this.state.faker.location.latitude()}}","{{this.state.faker.location.longitude()}}","{{this.state.faker.location.direction()}}","{{this.state.faker.location.ordinalDirection()}}","{{this.state.faker.location.nearbyGPSCoordinate()}}","{{this.state.faker.location.timeZone()}}","{{this.state.faker.location.streetName()}}","{{this.state.faker.location.streetSuffix()}}","{{this.state.faker.location.buildingNumber()}}","{{this.state.faker.location.secondaryAddress()}}","{{this.state.faker.internet.email()}}","{{this.state.faker.internet.userName()}}","{{this.state.faker.internet.password()}}","{{this.state.faker.internet.url()}}","{{this.state.faker.internet.domainName()}}","{{this.state.faker.internet.domainSuffix()}}","{{this.state.faker.internet.domainWord()}}","{{this.state.faker.internet.ip()}}","{{this.state.faker.internet.ipv6()}}","{{this.state.faker.internet.port()}}","{{this.state.faker.internet.userAgent()}}","{{this.state.faker.internet.httpMethod()}}","{{this.state.faker.internet.httpStatusCode()}}","{{this.state.faker.internet.color()}}","{{this.state.faker.internet.mac()}}","{{this.state.faker.internet.emoji()}}","{{this.state.faker.company.name()}}","{{this.state.faker.company.suffix()}}","{{this.state.faker.company.catchPhrase()}}","{{this.state.faker.company.bs()}}","{{this.state.faker.company.catchPhraseAdjective()}}","{{this.state.faker.company.catchPhraseDescriptor()}}","{{this.state.faker.company.catchPhraseNoun()}}","{{this.state.faker.company.bsAdjective()}}","{{this.state.faker.company.bsBuzz()}}","{{this.state.faker.company.bsNoun()}}","{{this.state.faker.finance.account()}}","{{this.state.faker.finance.accountName()}}","{{this.state.faker.finance.amount()}}","{{this.state.faker.finance.bic()}}","{{this.state.faker.finance.bitcoinAddress()}}","{{this.state.faker.finance.creditCardCVV()}}","{{this.state.faker.finance.creditCardIssuer()}}","{{this.state.faker.finance.creditCardNumber()}}","{{this.state.faker.finance.currencyCode()}}","{{this.state.faker.finance.currencyName()}}","{{this.state.faker.finance.currencySymbol()}}","{{this.state.faker.finance.ethereumAddress()}}","{{this.state.faker.finance.iban()}}","{{this.state.faker.finance.litecoinAddress()}}","{{this.state.faker.finance.mask()}}","{{this.state.faker.finance.pin()}}","{{this.state.faker.finance.routingNumber()}}","{{this.state.faker.finance.transactionDescription()}}","{{this.state.faker.finance.transactionType()}}","{{this.state.faker.date.past()}}","{{this.state.faker.date.future()}}","{{this.state.faker.date.between()}}","{{this.state.faker.date.recent()}}","{{this.state.faker.date.soon()}}","{{this.state.faker.date.birthdate()}}","{{this.state.faker.date.month()}}","{{this.state.faker.date.weekday()}}","{{this.state.faker.lorem.word()}}","{{this.state.faker.lorem.words()}}","{{this.state.faker.lorem.sentence()}}","{{this.state.faker.lorem.sentences()}}","{{this.state.faker.lorem.paragraph()}}","{{this.state.faker.lorem.paragraphs()}}","{{this.state.faker.lorem.text()}}","{{this.state.faker.lorem.lines()}}","{{this.state.faker.lorem.slug()}}","{{this.state.faker.phone.number()}}","{{this.state.faker.phone.imei()}}","{{this.state.faker.image.avatar()}}","{{this.state.faker.image.url()}}","{{this.state.faker.image.urlLoremFlickr()}}","{{this.state.faker.image.urlPicsumPhotos()}}","{{this.state.faker.image.urlPlaceholder()}}","{{this.state.faker.image.dataUri()}}","{{this.state.faker.animal.type()}}","{{this.state.faker.animal.dog()}}","{{this.state.faker.animal.cat()}}","{{this.state.faker.animal.snake()}}","{{this.state.faker.animal.bear()}}","{{this.state.faker.animal.lion()}}","{{this.state.faker.animal.cetacean()}}","{{this.state.faker.animal.horse()}}","{{this.state.faker.animal.bird()}}","{{this.state.faker.animal.cow()}}","{{this.state.faker.animal.fish()}}","{{this.state.faker.animal.crocodilia()}}","{{this.state.faker.animal.insect()}}","{{this.state.faker.animal.rabbit()}}","{{this.state.faker.vehicle.vehicle()}}","{{this.state.faker.vehicle.manufacturer()}}","{{this.state.faker.vehicle.model()}}","{{this.state.faker.vehicle.type()}}","{{this.state.faker.vehicle.fuel()}}","{{this.state.faker.vehicle.vin()}}","{{this.state.faker.vehicle.color()}}","{{this.state.faker.vehicle.vrm()}}","{{this.state.faker.commerce.department()}}","{{this.state.faker.commerce.productName()}}","{{this.state.faker.commerce.price()}}","{{this.state.faker.commerce.productAdjective()}}","{{this.state.faker.commerce.productMaterial()}}","{{this.state.faker.commerce.product()}}","{{this.state.faker.database.column()}}","{{this.state.faker.database.type()}}","{{this.state.faker.database.collation()}}","{{this.state.faker.database.engine()}}","{{this.state.faker.music.genre()}}","{{this.state.faker.music.songName()}}","{{this.state.faker.system.fileName()}}","{{this.state.faker.system.commonFileName()}}","{{this.state.faker.system.mimeType()}}","{{this.state.faker.system.commonFileType()}}","{{this.state.faker.system.commonFileExt()}}","{{this.state.faker.system.fileType()}}","{{this.state.faker.system.fileExt()}}","{{this.state.faker.system.directoryPath()}}","{{this.state.faker.system.filePath()}}","{{this.state.faker.system.semver()}}","{{this.state.faker.science.chemicalElement()}}","{{this.state.faker.science.unit()}}","{{this.state.faker.airline.airplane()}}","{{this.state.faker.airline.airport()}}","{{this.state.faker.airline.airline()}}","{{this.state.faker.airline.aircraftType()}}","{{this.state.faker.airline.flightNumber()}}","{{this.state.faker.airline.seat()}}","{{this.state.faker.airline.recordLocator()}}","{{this.state.faker.color.human()}}","{{this.state.faker.color.space()}}","{{this.state.faker.color.cssSupportedFunction()}}","{{this.state.faker.color.cssSupportedSpace()}}","{{this.state.faker.color.rgb()}}","{{this.state.faker.color.hsl()}}","{{this.state.faker.color.hwb()}}","{{this.state.faker.color.cmyk()}}","{{this.state.faker.color.lab()}}","{{this.state.faker.color.lch()}}","{{this.state.faker.color.colorByCSSColorSpace()}}","{{this.state.faker.git.branch()}}","{{this.state.faker.git.commitEntry()}}","{{this.state.faker.git.commitMessage()}}","{{this.state.faker.git.commitSha()}}","{{this.state.faker.git.shortSha()}}","{{this.state.faker.hacker.abbreviation()}}","{{this.state.faker.hacker.adjective()}}","{{this.state.faker.hacker.noun()}}","{{this.state.faker.hacker.verb()}}","{{this.state.faker.hacker.ingverb()}}","{{this.state.faker.hacker.phrase()}}","{{this.state.faker.helpers.arrayElement()}}","{{this.state.faker.helpers.arrayElements()}}","{{this.state.faker.helpers.shuffle()}}","{{this.state.faker.helpers.unique()}}","{{this.state.faker.helpers.mustache()}}","{{this.state.faker.helpers.createCard()}}","{{this.state.faker.helpers.contextualCard()}}","{{this.state.faker.helpers.userCard()}}","{{this.state.faker.helpers.createTransaction()}}","{{this.state.faker.helpers.rangeToNumber()}}","{{this.state.faker.helpers.regexpStyleStringParse()}}","{{this.state.faker.helpers.fromRegExp()}}","{{this.state.faker.helpers.replaceSymbolWithNumber()}}","{{this.state.faker.helpers.replaceSymbols()}}","{{this.state.faker.helpers.slugify()}}","{{this.state.faker.helpers.enumValue()}}","{{this.state.faker.helpers.objectKey()}}","{{this.state.faker.helpers.objectValue()}}","{{this.state.faker.helpers.weightedArrayElement()}}","{{this.state.faker.datatype.boolean()}}","{{this.state.faker.datatype.number()}}","{{this.state.faker.datatype.float()}}","{{this.state.faker.datatype.datetime()}}","{{this.state.faker.datatype.string()}}","{{this.state.faker.datatype.uuid()}}","{{this.state.faker.datatype.json()}}","{{this.state.faker.datatype.hexadecimal()}}","{{this.state.faker.random.word()}}","{{this.state.faker.random.words()}}","{{this.state.faker.random.locale()}}","{{this.state.faker.string.alpha()}}","{{this.state.faker.string.alphanumeric()}}","{{this.state.faker.string.binary()}}","{{this.state.faker.string.hexadecimal()}}","{{this.state.faker.string.numeric()}}","{{this.state.faker.string.octal()}}","{{this.state.faker.string.symbol()}}","{{this.state.faker.string.fromCharacters()}}","{{this.state.faker.string.uuid()}}","{{this.state.faker.string.nanoid()}}","{{this.state.faker.number.int()}}","{{this.state.faker.number.float()}}","{{this.state.faker.number.bigInt()}}"];var eT=a(80534);let eL=[],e_=(e,t)=>(e.trim().length>0&&(t="".concat(e,"_").concat(t).replace(/\s|-+/g,"_")),t.replace(/\s+/g,"_")),eR=e=>String(e).replace(/{{\s*_\.(.*?)\s*}}|{{\s*(.*?)\s*}}/g,"{{this.state.envData.$1$2}}"),eP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(0!=t.length)for(let a of t)a.children?eP(e_(e,a.name),a.children):(a.name=e_(e,a.name).toLocaleLowerCase(),eL.push(function(e){let t={};return Object.keys(e.body||{}).forEach(a=>{let s=e.body[a];try{s=JSON.parse(e.body[a]),t={...t,...s}}catch(s){t[a]=e.body[a]}}),{description:"".concat(e.name),name:e.name.toLowerCase().replace(/\s|-/g,"_"),url:eR(e.url),method:e.method,body:Object.keys(t||{}).map(e=>({key:e,value:eR(t[e])})),headers:e.headers?e.headers.map(e=>({key:e.name,value:eR(e.value)})):[]}}(a)))};var eF=a(61612);let ez={api:{label:"API",name:"",endpoint:"https://webhook.site/18eb8dca-7fba-4512-bf61-21392e905b60",method:"GET",headers:null,body:null},start:{label:"Start",name:""},condition:{data:{label:"Condition",name:"",condition:{left:"1",operator:"==",right:"1"},trueLabel:"True",falseLabel:"False"}},code:{code:"function node() { console.log('Hello World') }"},loop:{label:"Loop",name:"",source:""}},eO={api:eF.Ay.object({endpoint:eF.Ay.string().min(3),method:eF.Ay.enum(["GET","POST","DELETE","PUT"])}),start:eF.Ay.object({}),condition:eF.Ay.object({condition:eF.Ay.object({left:eF.Ay.any(),operator:eF.Ay.string(),right:eF.Ay.any()})}),code:eF.Ay.object({code:eF.Ay.string()}),loop:eF.Ay.object({source:eF.Ay.string()})},eI=[{id:"1",type:"start",position:{x:250,y:100},data:{label:"Start",name:"trigger_start_1"}}],eJ=[];function e$(e){let{worlflowToEditId:t,workflowToEdit:a,flowName:h}=e,m=(0,ek.useRouter)(),x=(0,r.useRef)(null),v=(0,r.useRef)(null),[y,b]=(0,r.useState)(null),[k,w]=(0,r.useState)(ez),[C,S]=(0,r.useState)({start:c,api:p,condition:g,code:Q,loop:j}),[A,E,D]=(0,n.ck)(eI),[T,L,_]=(0,n.fM)(eJ),[R,P]=(0,r.useState)(null),[F,z]=(0,r.useState)([]),[O,I]=(0,r.useState)([]),[J,M]=(0,r.useState)([]),[V,W]=(0,r.useState)(!1),[U,q]=(0,r.useState)([{id:"openRouterToken",key:"openRouterToken",value:""}]),[Z,ee]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(!1),[es,ei]=(0,r.useState)(eD),{updateWorkflow:eo,runWorkflow:ed,logs:eh,isLogsModalOpen:em,setIsLogsModalOpen:eu,isRunningWorkflow:ep,getCustomNodes:ef,createWorkflow:ex,handleUserChatMessage:eg}=(0,eN.A)(),[ev,ey]=(0,r.useState)([{id:"1",content:"Hello! I'm your workflow assistant. Describe what workflow you'd like to create, and I'll help you build it step by step.",sender:"assistant",timestamp:new Date}]),eC=e=>{var t;let a=O.find(t=>t.label==e.label);if(a)return void e_(e.type,{...a});let s={};(null==e||null==(t=e.properties)?void 0:t.length)>0&&e.properties.forEach(e=>{s[e.name]=e.default||""}),"condition"==e.type&&(s.condition={...s}),e_(e.type,s)},eS=e=>{let t=[...A];E([...t=t.map(t=>t.id==(null==e?void 0:e.id)?e:t)])},eA=async e=>{try{let t=await eg(e,[...A,...O]);if(ey(t=>[...t,{id:Date.now().toString(),content:e,sender:"user",timestamp:new Date}]),"string"==typeof t.data.result)return void ey(e=>[...e,{id:(Date.now()+1).toString(),content:"".concat(t.data.result),sender:"assistant",timestamp:new Date}]);ey(e=>[...e,{id:(Date.now()+1).toString(),content:"Node generated is: ".concat(JSON.stringify(t.data.result,null,2)),sender:"assistant",timestamp:new Date}]),null!=A.find(e=>{var a;return(null==e?void 0:e.id)==(null==(a=t.data.result)?void 0:a.id)})?eS(t.data.result):eC(t.data.result)}catch(s){var t,a;(null==s||null==(a=s.response)||null==(t=a.data)?void 0:t.error)&&(ey(t=>[...t,{id:Date.now().toString(),content:e,sender:"user",timestamp:new Date}]),ey(e=>[...e,{id:(Date.now()+1).toString(),content:"I'm sorry, but I couldn't generate the node. Error: ".concat(s.response.data.error),sender:"assistant",timestamp:new Date}]))}},e_=(e,t)=>{let a=e.charAt(0).toUpperCase()+e.slice(1),s={...k[e],label:e.charAt(0).toUpperCase()+e.slice(1),name:"trigger_".concat(a,"_").concat(A.length+1).toLowerCase(),...t};eV(ew.NEW_NODE,s.name);let r={id:"".concat(A.length+1),type:e,position:{x:250,y:A.length>0?A[A.length-1].position.y+150:100},data:s};E(e=>[...e,{...r}])},eR=e=>{let t=A.find(t=>t.id===e);if(!t)return;let a=t.type.charAt(0).toUpperCase()+t.type.slice(1),s={id:"".concat(A.length+2),type:t.type,position:{x:250,y:A.length>0?A[A.length-1].position.y+150:100},data:{...t.data}};s.data.label=t.type.charAt(0).toUpperCase()+t.type.slice(1),s.data.name="trigger_".concat(a,"_").concat(A.length+1).toLowerCase(),E(e=>[...e,{...s}])},eF=(0,r.useCallback)(e=>{E(t=>t.filter(t=>t.id!==e)),L(t=>t.filter(t=>t.source!==e&&t.target!==e)),R&&R.id===e&&P(null)},[R,E,L]),e$=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0==A.length)return void o.oR.error("You need at least one node to start the Worflow");let a={triggerEvent:A[0].type,nodes:[]},s={},r=[...A];for(let e=0;e<r.length;e+=1){let t=r[e];if(eO[t.type]){if(!eO[t.type].safeParse(t.data).success)return void o.oR.error("You need to fill the information of the node ".concat(t.data.name))}else{let e={};if(t.data.properties.filter(e=>e.required).forEach(t=>{t.name&&(t.required?e[t.name]=K.Yj():e[t.name]=K.Yj().optional())}),!K.Ik(e).safeParse(t.data).success)return void o.oR.error("You need to fill the information of the node ".concat(t.data.name))}s[t.id]=t}let n={};for(let e=0;e<r.length;e+=1){let t=r[e];n[t.id]||a.nodes.push(function e(t,a,s,r,n){if(t.type==$.start)return{type:t.type,name:t.data.name,input:{},output:{}};if(t.type==$.code)return{type:t.type,name:t.data.name,setting:{code:btoa(unescape(encodeURIComponent(t.data.code))),params:t.data.params},input:{},output:{}};if(t.type==$.api)return{type:t.type,name:t.data.name,setting:{method:t.data.method,url:t.data.endpoint,headers:t.data.headers,body:t.data.body},input:{},output:{}};if(t.type==$.condition){var i,l,o,d,c,h;let m=null==t||null==(l=t.data)||null==(i=l.condition)?void 0:i.left,u=m.startsWith("this.state")?"expression":"raw",p=null==t||null==(d=t.data)||null==(o=d.condition)?void 0:o.right,f=p.startsWith("this.state")?"expression":"raw",x=null==t||null==(h=t.data)||null==(c=h.condition)?void 0:c.operator,g={type:t.type,name:t.data.name,setting:{condition:{left:{type:u,value:m},right:{type:f,value:p},operator:x},success:[],fail:[]},input:{},output:{}};return g.setting.success=n.filter(e=>e.parentId==t.id&&"true"==e.pathCondition).map(t=>{let i=a[t.target];return s[i.id]=!0,e(i,a,s,r,n)}),g.setting.fail=n.filter(e=>e.parentId==t.id&&"false"==e.pathCondition).map(t=>{let i=a[t.target];return s[i.id]=!0,e(i,a,s,r,n)}),g}if(t.type==$.loop){let r={type:t.type,name:t.data.name,setting:{source:t.data.source||[],nodes:[]},input:{},output:{}};return r.setting.nodes=n.filter(e=>e.parentId==t.id&&"loop"==e.pathCondition).map((t,r)=>{let i=a[t.target];return s[i.id]=!0,e(i,a,s,r,n)}),r}let m=t.data;delete m.isCustomNode,delete m.name;let u=t.type.charAt(0).toUpperCase()+t.type.slice(1);return t.data.name="trigger_".concat(u,"_").concat(r+1).toLowerCase(),{type:t.type,name:t.data.name,setting:m,input:{},output:{}}}(t,s,n,e,T))}if(e)return void ed({isEditMode:null!=t,workflowId:t,contextVariables:[],envData:[...J],name:h||"",originalWorkflow:{nodes:[...A],edges:[...T]},...a});if(t)console.log({...a,workflowId:t,contextVariables:[],name:h||"",envData:[...J],originalWorkflow:{nodes:[...A],edges:[...T]}}),await eo({...a,workflowId:t,contextVariables:[],name:h||"",envData:[...J],originalWorkflow:{nodes:[...A],edges:[...T]}});else{let e=await ex({contextVariables:[],envData:[...J],name:h||"",originalWorkflow:{nodes:[...A],edges:[...T]},nodes:[...a.nodes]});setTimeout(()=>{m.push("/workflows/edit?id=".concat(e.id))},1e3)}},eM=async()=>{let e=await ef(),t=[],a={},s={};e.forEach(e=>{a[e.name]=eb;let r={};e.properties.forEach(e=>{r[e.name]=e.default}),s[e.name]={...r,properties:e.properties,isCustomNode:e.isCustomNode},t.push({type:e.name,label:e.name,icon:f.A,description:e.description,color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"})}),z(t),S({...C,...a}),w({...k,...s})},eV=(e,t)=>{if(e==ew.ENV_DATA)ei(e=>[...e,...t.map(e=>"{{this.state.envData.".concat(e.key,"}}"))]);else if(e==ew.NEW_NODE)ei(e=>[...e,"{{this.state.steps.".concat(t,".output}}")]);else if(e==ew.NEW_MANY_NODES){let e=t;e=e.map(e=>"{{this.state.steps.".concat(e,".output}}")),ei(t=>[...t,...e])}};return(0,r.useEffect)(()=>{a&&eM().then(()=>{a.originalWorkflow.nodes=a.originalWorkflow.nodes.map((e,t)=>{let a=e.type,s=k[a];e.data.isCustomNode=s.isCustomNode||!1;let r=a.charAt(0).toUpperCase()+a.slice(1);return e.data.name="trigger_".concat(r,"_").concat(t+1).toLowerCase(),e});let e=a.originalWorkflow.nodes.map(e=>{var t;return null==e||null==(t=e.data)?void 0:t.name});E(a.originalWorkflow.nodes),L(a.originalWorkflow.edges),b(t),M([...a.envData]),eV(ew.NEW_MANY_NODES,e),eV(ew.ENV_DATA,a.envData)})},[a]),(0,r.useEffect)(()=>{document.title="".concat(h," - Flow Request Builder")},[h]),(0,r.useEffect)(()=>{a||eM()},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("appSettings");if(e)try{let t=JSON.parse(e);q(t.length>0?t:[{id:"openRouterToken",key:"openRouterToken",value:""}])}catch(e){console.error("Error loading settings:",e)}},[]),(0,s.jsxs)("div",{className:"relative h-full",children:[(0,s.jsxs)(n.Ln,{children:[(0,s.jsxs)("div",{ref:x,className:"w-full h-[calc(100vh-4rem)]",children:[(0,s.jsxs)(n.Gc,{nodes:A.map(e=>({...e,data:{...e.data,deleteNode:()=>eF(e.id),duplicateNode:()=>eR(e.id)}})),edges:T,onNodesChange:D,onEdgesChange:_,onConnect:e=>{let t={};for(let e=0;e<A.length;e+=1){let a=A[e];t[a.id]=a}let a=t[null==e?void 0:e.source],s=a&&"condition"==a.type,r=a&&"loop"==a.type;if(s||r)e.parentId=e.source,e.pathCondition=e.sourceHandle;else{let t=T.filter(t=>t.target==e.source);t[0]&&t[0].parentId&&(e.parentId=t[0].parentId,e.pathCondition=t[0].pathCondition)}L(t=>(0,n.rN)(e,t))},onNodeClick:(e,t)=>{P({...t})},nodeTypes:C,fitView:!0,className:"w-full h-full",children:[(0,s.jsx)(i.H,{}),(0,s.jsx)(l.V,{}),(0,s.jsxs)(n.Zk,{position:"top-right",className:"flex gap-2",children:[(0,s.jsxs)(N.$,{size:"sm",variant:"outline",onClick:()=>ee(!0),children:[(0,s.jsx)(G.A,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,s.jsxs)(N.$,{size:"sm",variant:"outline",onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},children:[(0,s.jsx)(X.A,{className:"mr-2 h-4 w-4"}),"Upload Collections"]}),(0,s.jsxs)(N.$,{size:"sm",variant:"outline",onClick:()=>e$(!0),children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Run Flow"]}),(0,s.jsxs)(N.$,{size:"sm",variant:"outline",onClick:()=>W(!0),children:[(0,s.jsx)(H.A,{className:"mr-2 h-4 w-4"}),"Env Data"]}),(0,s.jsxs)(N.$,{size:"sm",onClick:()=>e$(),children:[(0,s.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),"Save Flow"]})]}),(0,s.jsx)(n.Zk,{position:"top-left",className:"mt-4",children:(0,s.jsx)(ej,{onAddNode:e_,httpRequestNodes:O,customNodes:F,onAddCurl:()=>ea(!0)})})]}),(0,s.jsx)("input",{type:"file",ref:v,onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let s=new FileReader;s.onload=e=>{var t;let a=null==(t=e.target)?void 0:t.result;try{let e=function(e){let t=eT.Ay.load(e);return eL=[],eP("",t.collection),eL}(a);e=e.map(e=>({type:"api",label:e.name,icon:u.A,name:e.name,endpoint:e.url,method:e.method,headers:e.headers,body:e.body,description:e.description,color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"})),I([...e]),o.oR.success("Uploaded ".concat(e.length," API requests"))}catch(e){console.error(e),o.oR.error("Error parsing YAML file")}},s.readAsText(a)},accept:".yaml,.yml",style:{display:"none"}}),(0,s.jsx)(eE,{messages:ev,onSendMessage:eA,placeholder:"Need help with workflow creation?",maxHeight:"300px",className:"w-90 h-[400px]",title:"Workflow Assistant",isFloating:!0,defaultPosition:{x:350,y:100},defaultMinimized:!0})]}),R&&(0,s.jsx)(B,{optionsMenu:es,node:R,onChange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(a=>[...a.map(a=>a.id===e?{...a,data:{...a.data,...t}}:a)])},onClose:()=>{P(null)},isOpen:!!R}),(0,s.jsx)(er,{isOpen:V,onClose:()=>W(!1),envData:J,onSave:e=>{eV(ew.ENV_DATA,e),M(e)}}),(0,s.jsx)(en,{isOpen:em,onClose:()=>eu(!1),logs:eh,isLoading:ep}),(0,s.jsx)(el,{isOpen:Z,onClose:()=>ee(!1),settings:U,onSave:e=>{q(e),localStorage.setItem("appSettings",JSON.stringify(e))}}),(0,s.jsx)(ec,{isOpen:et,onClose:()=>ea(!1),onSave:e=>{e_("api",e)}})]}),(0,s.jsx)(o.N9,{})]})}},82714:(e,t,a)=>{a.d(t,{J:()=>i});var s=a(95155);a(12115);var r=a(40968),n=a(53999);function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},88482:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l});var s=a(95155),r=a(12115),n=a(53999);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},89852:(e,t,a)=>{a.d(t,{p:()=>n});var s=a(95155);a(12115);var r=a(53999);function n(e){let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}}}]);